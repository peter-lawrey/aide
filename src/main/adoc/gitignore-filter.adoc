= Gitignore Filter Specification
:doctype: requirements
:author: Peter Lawrey
:lang: en-GB
:toc:

== Overview

The `GitignoreFilter` processes `.gitignore` files to determine which files and directories should be excluded during project scans.
It ensures compliance with `.gitignore` rules and integrates seamlessly into broader file filtering mechanisms.

== Functional Requirements

. **Parse `.gitignore`**
* Read and process the `.gitignore` file, supporting:
- Wildcards (`*.log`, `*.tmp`)
- Directory rules (`target/`, `.idea/`)
- Negations (`!important_file.txt`)
- Relative paths (`/.config`)

. **Ignore Comments and Blanks**
* Skip lines starting with `#` or containing only whitespace.

. **Match File Paths**
* Determine file inclusion/exclusion based on `.gitignore` rules:
- `IGNORED`: Explicitly excluded.
- `NOT_IGNORED`: Explicitly included via negation.
- `DEFAULT`: No matching rule; further filters decide.

. **Precedence**
* Apply the last matching rule in `.gitignore` (Git standard).

== Integration

The filter supports integration but overrides with other rules, ensuring:

1. Overshadowed files (`file.txt` excluded if `file.txt.ad` exists).
2. Skipping large files (>64KB).
3. Excluding hidden files and certain extensions (`.asciidoc`, `.png`).

== Examples

. **Patterns**

----
# Ignore log files
*.log

# Include specific log file
!keep_this.log

# Exclude directories
target/
.idea/
----

- `*.log`: Excludes all `.log` files.
- `!keep_this.log`: Includes `keep_this.log`.
- `target/`: Excludes all files in `target/`.

== Non-Functional Requirements

. Efficient parsing for large `.gitignore` files.
. Memory optimization for repeated calls.
. Optional debug logs for troubleshooting.

== Summary

`GitignoreFilter` ensures `.gitignore` rules are respected, enhancing project clarity and consistency.

== References

* link:https://git-scm.com/docs/gitignore[Git Official .gitignore Documentation]
* link:https://www.atlassian.com/git/tutorials/saving-changes/gitignore[Atlassian Gitignore Tutorial]